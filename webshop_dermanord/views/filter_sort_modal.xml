<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <!--
         <data>
         <template id="main_filter_sort_layout" inherit_id="website.layout">
         <xpath expr="//div[@id='wrapwrap']/main" position="inside">
         <t t-if="shop_footer and filter_version == 'webshop'">
         <t t-set="filter_facets" t-value="request.env['product.facet'].get_filtered_facets(request.session.get('form_values'))" />
         <t t-set="filter_categories" t-value="request.env['product.public.category'].search([])" />
         <div id="dn_filter_modal" class="modal fade" role="dialog">
         <div class="modal-dialog" style="margin: 0px; width: 100%;">
         <div class="modal-content">
         <div class="modal-header">
         <h5 class="modal-title">
         Product Filter
         <button type="button" class="close" data-dismiss="modal" aria-label="Close">
         <span aria-hidden="true">&amp;times;</span>
         </button>
         </h5>
         </div>
         <div class="modal-body" style="padding: 0px;">
         <t t-call="webshop_dermanord.dn_filter_form" />
         </div>
         <div class="modal-footer hidden">
         <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
         </div>
         </div>
         </div>
         </div>
         <div id="dn_sort_modal" class="modal fade" role="dialog">
         <div class="modal-dialog" style="margin: 0px; width: 100%;">
         <div class="modal-content">
         <div class="modal-header">
         <h5 class="modal-title">
         Product Sort
         <button type="button" class="close" data-dismiss="modal" aria-label="Close">
         <span aria-hidden="true">&amp;times;</span>
         </button>
         </h5>
         </div>
         <div class="modal-body">
         <t t-call="webshop_dermanord.dn_sort_form" />
         </div>
         <div class="modal-footer hidden">
         <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
         </div>
         </div>
         </div>
         </div>
         <div id="bottom_div" class="container hidden-lg hidden-md hidden-sm">
         <a href="#" id="filter-btn-modal" data-toggle="modal" data-target="#dn_filter_modal" class="pull-left" style="color: #fff; font-size: 1.3em; padding: 5px;">
         <i class="fa fa-filter" />
         Filter
         <span class="filter_match" t-if="request.session.get('chosen_filter_qty') &gt; 0">
         <t t-esc="request.session.get('chosen_filter_qty')" />
         </span>
         </a>
         <a href="#" id="sort-btn-modal" data-toggle="modal" data-target="#dn_sort_modal" class="pull-right" style="color: #fff; font-size: 1.3em; padding: 5px;">
         <i class="fa fa-sort" />
         Sort
         <span class="sort_match" t-if="request.session.get('sort_name') and request.session.get('sort_order')">
         <i class="fa fa-font" t-if="request.session.get('sort_name') == 'name'" />
         <i class="fa fa-dollar" t-if="request.session.get('sort_name') == 'list_price'" />
         <i class="fa fa-barcode" t-if="request.session.get('sort_name') == 'default_code'" />
         <i class="fa fa-sort-asc" t-if="request.session.get('sort_order') == 'asc'" />
         <i class="fa fa-sort-desc" t-if="request.session.get('sort_order') == 'desc'" />
         <i class="fa fa-trophy" t-if="request.session.get('sort_name') == 'sold_qty'" />
         </span>
         </a>
         </div>
         </t>
         </xpath>
         </template>
         <template id="dn_filter_form" name="DN Filter Form">
         <form action="/webshop" method="post">
         <div class="container" style="padding: 0px;">
         <t t-set="first_facet" t-value="0" />
         <div class="col-md-6 col-sm-6 col-xs-6" style="padding: 0px;">
         <t t-call="webshop_dermanord.dn_filter_navigator" />
         </div>
         <div class="col-md-6 col-sm-6 col-xs-6" style="padding: 0px;">
         <t t-call="webshop_dermanord.dn_filter_content" />
         </div>
         </div>
         <div id="filter_btn_group" class="btn-group">
         <button class="mt32 dn_btn dn_primary dn_ok" name="post_form" value="ok" type="submit" style="padding: 12px 20px;">Search</button>
         <button class="mt32 dn_btn dn_default" name="post_form" value="ok" type="submit" onclick="webshop_restore_filter()" style="padding: 12px 20px;">
         <i class="fa fa-trash-o" />
         Clear All
         </button>
         <t t-call="webshop_dermanord.dn_website_group_info"/>
         </div>
         </form>
         </template>
         <template id="dn_filter_navigator" name="DN Filter Navigator">
         <ul class="nav nav-stacked">
         <li class="active">
         <a data-toggle="tab" href="#current">
         <h5>
         New products &amp; Offers
         <t t-set="current_count" t-value="0" />
         <t t-if="'current_news' in request.session.get('form_values').keys() or 'current_offer' in request.session.get('form_values').keys()">
         <t t-if="request.session.get('form_values').get('current_news') == 'current_news'">
         <t t-set="current_count" t-value="current_count + 1" />
         </t>
         <t t-if="request.session.get('form_values').get('current_offer') == 'current_offer'">
         <t t-set="current_count" t-value="current_count + 1" />
         </t>
         </t>
         <t t-if="current_count != 0">
         <span class="filter_match" t-esc="current_count" />
         </t>
         <i class="fa fa-angle-right" />
         </h5>
         </a>
         </li>
         <li>
         <a data-toggle="tab" href="#category">
         <h5>
         Categories
         <t t-if="filter_categories and request.session.get('form_values')">
         <t t-set="category_count" t-value="0" />
         <t t-foreach="filter_categories" t-as="category">
         <t t-if="'category_%s' %category.id in request.session.get('form_values').keys()">
         <t t-set="category_count" t-value="category_count + 1" />
         </t>
         </t>
         <t t-if="category_count != 0">
         <span class="filter_match" t-esc="category_count" />
         </t>
         </t>
         <i class="fa fa-angle-right" />
         </h5>
         </a>
         </li>
         <t t-foreach="filter_facets" t-as="facet">
         <li>
         <a data-toggle="tab" t-att-href="'#facet_%s' %facet.id">
         <h5>
         <span t-esc="facet.name" />
         <t t-set="facet_values" t-value="request.env['product.facet.value'].search([('facet_id', '=', facet.id)])" />
         <t t-if="len(facet_values) &gt; 0 and request.session.get('form_values')">
         <t t-set="facet_values_count" t-value="0" />
         <t t-foreach="facet_values.sorted(key=lambda f: f.name)" t-as="facet_value">
         <t t-if="'facet_%s_%s' %(facet.id, facet_value.id) in request.session.get('form_values').keys()">
         <t t-set="facet_values_count" t-value="facet_values_count + 1" />
         </t>
         </t>
         <t t-if="facet_values_count != 0">
         <span class="filter_match" t-esc="facet_values_count" />
         </t>
         </t>
         <i class="fa fa-angle-right" />
         </h5>
         </a>
         </li>
         </t>
         <li t-if="filter_ingredients and request.session.get('form_values')">
         <a data-toggle="tab" href="#ingredient">
         <h5>
         Ingredients
         <t t-set="ingredient_count" t-value="0" />
         <t t-foreach="filter_ingredients" t-as="ingredient">
         <t t-if="'ingredient_%s' %ingredient.id in request.session.get('form_values').keys()">
         <t t-set="ingredient_count" t-value="ingredient_count + 1" />
         </t>
         <t t-if="'notingredient_%s' %ingredient.id in request.session.get('form_values').keys()">
         <t t-set="ingredient_count" t-value="ingredient_count + 1" />
         </t>
         </t>
         <t t-if="ingredient_count != 0">
         <span class="filter_match" t-esc="ingredient_count" />
         </t>
         <i class="fa fa-angle-right" />
         </h5>
         </a>
         </li>
         </ul>
         </template>
         <template id="dn_filter_content" name="DN Filter Content">
         <div class="tab-content">
         <div id="current" class="tab-pane fade in active">
         <div class="checkbox">
         <label>
         <t t-if="request.session.get('form_values')">
         <input type="checkbox" name="current_news" value="current_news" t-att="{'checked': '1'} if request.session.get('form_values').get('current_news') == 'current_news' else {}" />
         News
         </t>
         <t t-if="not request.session.get('form_values')">
         <input type="checkbox" name="current_news" value="current_news" />
         News
         </t>
         </label>
         </div>
         <div class="checkbox">
         <label>
         <input type="checkbox" name="current_offer" value="current_offer" t-att="{'checked': '1'} if request.session.get('form_values', {}).get('current_offer') == 'current_offer' else {}" />
         Offer
         </label>
         </div>
         </div>
         <div id="category" class="tab-pane fade">
         <t t-if="filter_categories">
         <t t-foreach="filter_categories" t-as="category">
         <div class="checkbox">
         <label>
         <input type="checkbox" t-att-name="'category_%s' %category.id" t-att-value="category.id" t-att="{'checked': '1'} if request.session.get('form_values').get('category_%s' %category.id) == category.id else {}" />
         <t t-esc="category.name" />
         </label>
         </div>
         </t>
         </t>
         </div>
         <t t-foreach="filter_facets" t-as="facet">
         <t t-set="facet_values" t-value="request.env['product.facet.value'].search([('facet_id', '=', facet.id)])" />
         <div t-att-id="'facet_%s' %facet.id" class="tab-pane">
         <t t-if="len(facet_values) &gt; 0">
         <t t-foreach="facet_values.sorted(key=lambda f: f.name)" t-as="facet_value">
         <div class="checkbox">
         <label>
         <t t-if="request.session.get('form_values')">
         <input type="checkbox" t-att-name="'facet_%s_%s' %(facet.id, facet_value.id)" t-att-value="facet_value.id" t-att="{'checked': '1'} if (request.session.get('form_values').get('facet_%s_%s' %(facet.id, facet_value.id)) and request.session.get('form_values').get('facet_%s_%s' %(facet.id, facet_value.id)) == str(facet_value.id)) else {}" />
         <t t-esc="facet_value.name" />
         </t>
         <t t-if="not request.session.get('form_values')">
         <input type="checkbox" t-att-name="'facet_%s_%s' %(facet.id, facet_value.id)" t-att-value="facet_value.id" />
         <t t-esc="facet_value.name" />
         </t>
         </label>
         </div>
         </t>
         </t>
         </div>
         </t>
         <div id="ingredient" class="tab-pane fade">
         <t t-if="filter_ingredients">
         <t t-foreach="filter_ingredients" t-as="ingredient">
         <h5 t-field="ingredient.name" />
         <div class="checkbox">
         <label class="col-md-6 col-sm-6 col-xs-6" style="float: left;">
         <t t-if="request.session.get('form_values')">
         <input type="checkbox" t-att-name="'ingredient_%s' %ingredient.id" t-att-value="ingredient.id" t-att="{'checked': '1'} if request.session.get('form_values').get('ingredient_%s' %ingredient.id) == ingredient.id else {}" class="like" />
         <i class="fa fa-smile-o like_icon" />
         </t>
         <t t-if="not request.session.get('form_values')">
         <input type="checkbox" t-att-name="'ingredient_%s' %ingredient.id" t-att-value="ingredient.id" class="like" />
         <i class="fa fa-smile-o like_icon" />
         </t>
         </label>
         <label class="col-md-6 col-sm-6 col-xs-6" style="float: right;">
         <t t-if="request.session.get('form_values')">
         <input type="checkbox" t-att-name="'notingredient_%s' %ingredient.id" t-att-value="ingredient.id" t-att="{'checked': '1'} if request.session.get('form_values').get('notingredient_%s' %ingredient.id) == str(ingredient.id) else {}" class="unlike" />
         <i class="fa fa-frown-o unlike_icon" />
         </t>
         <t t-if="not request.session.get('form_values')">
         <input type="checkbox" t-att-name="'notingredient_%s' %ingredient.id" t-att-value="ingredient.id" class="unlike" />
         <i class="fa fa-frown-o unlike_icon" />
         </t>
         </label>
         </div>
         </t>
         </t>
         </div>
         <input type="hidden" name="order" t-att-value="request.session.get('form_values', {}).get('order') or 'sold_qty desc'" />
         </div>
         </template>
         <template id="dn_sort_form" name="DN Sort Form">
         <form action="/webshop" method="post">
         <div class="container" style="padding: 0px;">
         <ul style="list-style-type: none;">
         <li>
         <div class="radio">
         <label>
         <t t-if="request.session.get('form_values')">
         <input type="radio" name="order" value="sold_qty desc" t-att="{'checked': '1'} if request.session.get('form_values').get('order') == 'sold_qty desc' else {}" />
         Most Sold
         </t>
         <t t-if="not request.session.get('form_values')">
         <input type="radio" name="order" value="sold_qty desc" checked="1" />
         Most Sold
         </t>
         </label>
         </div>
         </li>
         <li>
         <div class="radio">
         <label>
         <t t-if="request.session.get('form_values')">
         <input type="radio" name="order" value="name asc, default_code asc" t-att="{'checked': '1'} if request.session.get('form_values').get('order') == 'name asc, default_code asc' else {}" />
         Name Ascending
         </t>
         <t t-if="not request.session.get('form_values')">
         <input type="radio" name="order" value="name asc, default_code asc" />
         Name Ascending
         </t>
         </label>
         </div>
         </li>
         <li>
         <div class="radio">
         <label>
         <t t-if="request.session.get('form_values')">
         <input type="radio" name="order" value="name desc, default_code desc" t-att="{'checked': '1'} if request.session.get('form_values').get('order') == 'name desc, default_code desc' else {}" />
         Name Descending
         </t>
         <t t-if="not request.session.get('form_values')">
         <input type="radio" name="order" value="name desc, default_code desc" />
         Name Descending
         </t>
         </label>
         </div>
         </li>
         <li>
         <div class="radio">
         <label>
         <t t-if="request.session.get('form_values')">
         <input type="radio" name="order" value="list_price asc" t-att="{'checked': '1'} if request.session.get('form_values').get('order') == 'list_price asc' else {}" />
         Price Ascending
         </t>
         <t t-if="not request.session.get('form_values')">
         <input type="radio" name="order" value="list_price asc" />
         Price Ascending
         </t>
         </label>
         </div>
         </li>
         <li>
         <div class="radio">
         <label>
         <t t-if="request.session.get('form_values')">
         <input type="radio" name="order" value="list_price desc" t-att="{'checked': '1'} if request.session.get('form_values').get('order') == 'list_price desc' else {}" />
         Price Descending
         </t>
         <t t-if="not request.session.get('form_values')">
         <input type="radio" name="order" value="list_price desc" />
         Price Descending
         </t>
         </label>
         </div>
         </li>
         </ul>
         </div>
         <t t-if="request.session.get('form_values')">
         <t t-if="request.session.get('form_values').get('current_news') == 'current_news'">
         <input type="hidden" name="current_news" value="current_news" />
         </t>
         <t t-if="request.session.get('form_values').get('current_offer') == 'current_offer'">
         <input type="hidden" name="current_offer" value="current_offer" />
         </t>
         </t>
         <t t-if="filter_categories">
         <t t-foreach="filter_categories" t-as="category">
         <t t-if="request.session.get('form_values')">
         <t t-if="request.session.get('form_values').get('category_%s' %category.id) == category.id">
         <input type="hidden" t-att-name="'category_%s' %category.id" t-att-value="category.id" />
         </t>
         </t>
         </t>
         </t>
         <t t-foreach="filter_facets" t-as="facet">
         <t t-set="facet_values" t-value="request.env['product.facet.value'].search([('facet_id', '=', facet.id)])" />
         <t t-if="len(facet_values) &gt; 0">
         <t t-foreach="facet_values.sorted(key=lambda f: f.name)" t-as="facet_value">
         <t t-if="request.session.get('form_values')">
         <t t-if="request.session.get('form_values').get('facet_%s_%s' %(facet.id, facet_value.id)) == str(facet_value.id)">
         <input type="hidden" t-att-name="'facet_%s_%s' %(facet.id, facet_value.id)" t-att-value="facet_value.id" />
         </t>
         </t>
         </t>
         </t>
         </t>
         <t t-if="filter_ingredients">
         <t t-foreach="filter_ingredients" t-as="ingredient">
         <t t-if="request.session.get('form_values')">
         <t t-if="request.session.get('form_values').get('ingredient_%s' %ingredient.id) == ingredient.id">
         <input type="hidden" t-att-name="'ingredient_%s' %ingredient.id" t-att-value="ingredient.id" />
         </t>
         <t t-if="request.session.get('form_values').get('notingredient_%s' %ingredient.id) == ingredient.id">
         <input type="hidden" t-att-name="'notingredient_%s' %ingredient.id" t-att-value="ingredient.id" />
         </t>
         </t>
         </t>
         </t>
         <div class="btn-group">
         <button class="mt32 dn_btn dn_primary dn_ok" name="post_form" value="ok" type="submit">OK</button>
         <t t-if="user_id.partner_id.property_product_pricelist and user_id.partner_id.property_product_pricelist.for_reseller">
         <t t-if="webshop_type == 'dn_list'">
         <button class="mt32 dn_btn dn_primary" formaction="/webshop/webshop_type/dn_shop" type="submit" aria-label="Switch to grid view" title="Switch to grid view">
         <i class="fa fa-th" />
         </button>
         </t>
         <t t-if="webshop_type == 'dn_shop'">
         <button class="mt32 dn_btn dn_primary" formaction="/webshop/webshop_type/dn_list" type="submit" aria-label="Switch to list view" title="Switch to list view">
         <i class="fa fa-th-list" />
         </button>
         </t>
         </t>
         </div>
         </form>
         </template>
         <template id="desktop_product_navigator" name="Desktop Product Navigator">
         <div class="mt16">
         <t t-set="filter_facets" t-value="request.env['product.facet'].get_filtered_facets(request.session.get('form_values'))" />
         <t t-set="filter_categories" t-value="request.env['product.public.category'].search([])" />
         <t t-call="webshop_dermanord.desktop_product_filter_form" />
         <t t-call="webshop_dermanord.desktop_product_sort_form" />
         </div>
         </template>
         <template id="desktop_product_filter_form" name="Desktop Product Filter Form">
         <form action="/webshop" method="post">
         <div class="btn-group">
         <button class="dn_btn dn_primary dn_ok" name="post_form" value="ok" type="submit" style="padding: 12px 20px;">Search</button>
         <button class="dn_btn dn_default" name="post_form" value="ok" type="submit" onclick="webshop_restore_filter()" style="padding: 12px 20px;">
         <i class="fa fa-trash-o" />
         Clear All
         </button>
         <t t-call="webshop_dermanord.dn_website_group_info"/>
         </div>
         <div class="container" style="padding: 0px;">
         <t t-set="first_facet" t-value="0" />
         <t t-call="webshop_dermanord.desktop_product_filter" />
         </div>
         <input type="hidden" name="order" t-att-value="request.session.get('form_values', {}).get('order') or 'sold_qty desc'" />
         </form>
         </template>
         <template id="desktop_product_filter" name="Desktop Filter">
         <div id="desktop_product_navigator_filter">
         <h4 class="text-center dn_uppercase">Refine results</h4>
         <div class="panel-group">
         <div class="panel panel-default">
         <div class="panel-heading">
         <h4 class="panel-title">
         New products &amp; Offers
         <a data-toggle="collapse" href="#desktop_current" class="pull-right">
         <i class="desktop_angle fa fa-angle-down" />
         </a>
         <t t-if="request.session.get('form_values')">
         <t t-set="current_count" t-value="0" />
         <t t-if="'current_news' in request.session.get('form_values', {}) or 'current_offer' in request.session.get('form_values', {})">
         <t t-if="request.session.get('form_values').get('current_news') == 'current_news'">
         <t t-set="current_count" t-value="current_count + 1" />
         </t>
         <t t-if="request.session.get('form_values').get('current_offer') == 'current_offer'">
         <t t-set="current_count" t-value="current_count + 1" />
         </t>
         </t>
         <t t-if="current_count != 0">
         <span class="filter_match" t-esc="current_count" />
         </t>
         </t>
         </h4>
         </div>
         <div id="desktop_current" class="panel-collapse collapse">
         <div class="panel-body">
         <div class="checkbox">
         <h5>
         <label>
         <t t-if="request.session.get('form_values')">
         <input type="checkbox" name="current_news" value="current_news" t-att="{'checked': '1'} if request.session.get('form_values').get('current_news') == 'current_news' else {}" />
         News
         </t>
         <t t-if="not request.session.get('form_values')">
         <input type="checkbox" name="current_news" value="current_news" />
         News
         </t>
         </label>
         </h5>
         </div>
         <div class="checkbox">
         <h5>
         <label>
         <input type="checkbox" name="current_offer" value="current_offer" t-att="{'checked': '1'} if request.session.get('form_values', {}).get('current_offer') == 'current_offer' else {}" />
         Offer
         </label>
         </h5>
         </div>
         </div>
         </div>
         <div class="panel-heading">
         <h4 class="panel-title">
         Categories
         <a data-toggle="collapse" href="#desktop_category" class="pull-right">
         <i class="desktop_angle fa fa-angle-down" />
         </a>
         <t t-if="filter_categories and request.session.get('form_values')">
         <t t-set="category_count" t-value="0" />
         <t t-foreach="filter_categories" t-as="category">
         <t t-if="'category_%s' %category.id in request.session.get('form_values').keys()">
         <t t-set="category_count" t-value="category_count + 1" />
         </t>
         </t>
         <t t-if="category_count != 0">
         <span class="filter_match" t-esc="category_count" />
         </t>
         </t>
         </h4>
         </div>
         <div id="desktop_category" class="panel-collapse collapse">
         <div class="panel-body">
         <t t-if="filter_categories">
         <t t-foreach="filter_categories" t-as="category">
         <div class="checkbox">
         <h5>
         <label>
         <t t-if="request.session.get('form_values')">
         <input type="checkbox" t-att-name="'category_%s' %category.id" t-att-value="category.id" t-att="{'checked': '1'} if request.session.get('form_values').get('category_%s' %category.id) == category.id else {}" />
         <t t-esc="category.name" />
         </t>
         <t t-if="not request.session.get('form_values')">
         <input type="checkbox" t-att-name="'category_%s' %category.id" t-att-value="category.id" />
         <t t-esc="category.name" />
         </t>
         </label>
         </h5>
         </div>
         </t>
         </t>
         </div>
         </div>
         <t t-foreach="filter_facets" t-as="facet">
         <div class="panel-heading">
         <h4 class="panel-title">
         <t t-esc="facet.name" />
         <a data-toggle="collapse" t-att-href="'#desktop_facet_%s' %facet.id" class="pull-right">
         <i class="desktop_angle fa fa-angle-down" />
         </a>
         <t t-set="facet_values" t-value="request.env['product.facet.value'].search([('facet_id', '=', facet.id)])" />
         <t t-if="len(facet_values) &gt; 0 and request.session.get('form_values')">
         <t t-set="facet_values_count" t-value="0" />
         <t t-foreach="facet_values.sorted(key=lambda f: f.name)" t-as="facet_value">
         <t t-if="'facet_%s_%s' %(facet.id, facet_value.id) in request.session.get('form_values').keys()">
         <t t-set="facet_values_count" t-value="facet_values_count + 1" />
         </t>
         </t>
         <t t-if="facet_values_count != 0">
         <span class="filter_match" t-esc="facet_values_count" />
         </t>
         </t>
         </h4>
         </div>
         <div t-att-id="'desktop_facet_%s' %facet.id" class="panel-collapse collapse">
         <div class="panel-body">
         <t t-set="facet_values" t-value="request.env['product.facet.value'].search([('facet_id', '=', facet.id)])" />
         <t t-if="len(facet_values) &gt; 0">
         <t t-foreach="facet_values.sorted(key=lambda f: f.name)" t-as="facet_value">
         <div class="checkbox">
         <h5>
         <label>
         <t t-if="request.session.get('form_values')">
         <input type="checkbox" t-att-name="'facet_%s_%s' %(facet.id, facet_value.id)" t-att-value="facet_value.id" t-att="{'checked': '1'} if (request.session.get('form_values').get('facet_%s_%s' %(facet.id, facet_value.id)) and request.session.get('form_values').get('facet_%s_%s' %(facet.id, facet_value.id)) == str(facet_value.id)) else {}" />
         <t t-esc="facet_value.name" />
         </t>
         <t t-if="not request.session.get('form_values')">
         <input type="checkbox" t-att-name="'facet_%s_%s' %(facet.id, facet_value.id)" t-att-value="facet_value.id" />
         <t t-esc="facet_value.name" />
         </t>
         </label>
         </h5>
         </div>
         </t>
         </t>
         </div>
         </div>
         </t>
         <div class="panel-heading" t-if="False">
         <h4 class="panel-title">
         Ingredients
         <a data-toggle="collapse" href="#desktop_ingredient" class="pull-right">
         <i class="desktop_angle fa fa-angle-down" />
         </a>
         <t t-if="filter_ingredients and request.session.get('form_values')">
         <t t-set="ingredient_count" t-value="0" />
         <t t-foreach="filter_ingredients" t-as="ingredient">
         <t t-if="'ingredient_%s' %ingredient.id in request.session.get('form_values').keys()">
         <t t-set="ingredient_count" t-value="ingredient_count + 1" />
         </t>
         <t t-if="'notingredient_%s' %ingredient.id in request.session.get('form_values').keys()">
         <t t-set="ingredient_count" t-value="ingredient_count + 1" />
         </t>
         </t>
         <t t-if="ingredient_count != 0">
         <span class="filter_match" t-esc="ingredient_count" />
         </t>
         </t>
         </h4>
         </div>
         <div id="desktop_ingredient" class="panel-collapse collapse" t-if="False">
         <div class="panel-body">
         <t t-if="filter_ingredients">
         <t t-foreach="filter_ingredients" t-as="ingredient">
         <h5 t-field="ingredient.name" />
         <div class="checkbox">
         <h5>
         <label class="col-md-6 col-sm-6 col-xs-6" style="float: left;">
         <t t-if="request.session.get('form_values')">
         <input type="checkbox" t-att-name="'ingredient_%s' %ingredient.id" t-att-value="ingredient.id" t-att="{'checked': '1'} if request.session.get('form_values').get('ingredient_%s' %ingredient.id) == ingredient.id else {}" class="like" />
         <i class="fa fa-smile-o like_icon" />
         </t>
         <t t-if="not request.session.get('form_values')">
         <input type="checkbox" t-att-name="'ingredient_%s' %ingredient.id" t-att-value="ingredient.id" class="like" />
         <i class="fa fa-smile-o like_icon" />
         </t>
         </label>
         <label class="col-md-6 col-sm-6 col-xs-6" style="float: right;">
         <t t-if="request.session.get('form_values')">
         <input type="checkbox" t-att-name="'notingredient_%s' %ingredient.id" t-att-value="ingredient.id" t-att="{'checked': '1'} if request.session.get('form_values').get('notingredient_%s' %ingredient.id) == ingredient.id else {}" class="unlike" />
         <i class="fa fa-frown-o unlike_icon" />
         </t>
         <t t-if="not request.session.get('form_values')">
         <input type="checkbox" t-att-name="'notingredient_%s' %ingredient.id" t-att-value="ingredient.id" class="unlike" />
         <i class="fa fa-frown-o unlike_icon" />
         </t>
         </label>
         </h5>
         </div>
         </t>
         </t>
         </div>
         </div>
         </div>
         </div>
         </div>
         </template>
         <template id="desktop_product_sort_form" name="Desktop Product Sort Form">
         <h4 class="text-center dn_uppercase">Sorting</h4>
         <form action="/webshop" method="post">
         <select id="descktop_sort_selector" name="order" class="form-control selectpicker dropdown dn_selection_dropdown" onchange="this.form.submit();">
         <t t-if="request.session.get('form_values')">
         <option value="sold_qty desc" t-att="{'selected': '1'} if request.session.get('form_values').get('order') == 'sold_qty desc' else {}">Most Sold</option>
         <option value="name asc, default_code asc" t-att="{'selected': '1'} if request.session.get('form_values').get('order') == 'name asc, default_code asc' else {}">Name Ascending</option>
         <option value="name desc, default_code desc" t-att="{'selected': '1'} if request.session.get('form_values').get('order') == 'name desc, default_code desc' else {}">Name Descending</option>
         <option value="list_price asc" t-att="{'selected': '1'} if request.session.get('form_values').get('order') == 'list_price asc' else {}">Price Ascending</option>
         <option value="list_price desc" t-att="{'selected': '1'} if request.session.get('form_values').get('order') == 'list_price desc' else {}">Price Descending</option>
         </t>
         <t t-if="not request.session.get('form_values')">
         <option value="sold_qty desc" select="1">Most Sold</option>
         <option value="name asc, default_code asc">Name Ascending</option>
         <option value="name desc, default_code desc">Name Descending</option>
         <option value="list_price asc">Price Ascending</option>
         <option value="list_price desc">Price Descending</option>
         </t>
         </select>
         <i class="desktop_angle fa fa-angle-down" />
         <t t-if="request.session.get('form_values')">
         <t t-if="request.session.get('form_values').get('current_news') == 'current_news'">
         <input type="hidden" name="current_news" value="current_news" />
         </t>
         <t t-if="request.session.get('form_values').get('current_offer') == 'current_offer'">
         <input type="hidden" name="current_offer" value="current_offer" />
         </t>
         </t>
         <t t-if="filter_categories">
         <t t-foreach="filter_categories" t-as="category">
         <t t-if="request.session.get('form_values')">
         <t t-if="request.session.get('form_values').get('category_%s' %category.id) == category.id">
         <input type="hidden" t-att-name="'category_%s' %category.id" t-att-value="category.id" />
         </t>
         </t>
         </t>
         </t>
         <t t-foreach="filter_facets" t-as="facet">
         <t t-set="facet_values" t-value="request.env['product.facet.value'].search([('facet_id', '=', facet.id)])" />
         <t t-if="len(facet_values) &gt; 0">
         <t t-foreach="facet_values.sorted(key=lambda f: f.name)" t-as="facet_value">
         <t t-if="request.session.get('form_values')">
         <t t-if="request.session.get('form_values').get('facet_%s_%s' %(facet.id, facet_value.id)) == str(facet_value.id)">
         <input type="hidden" t-att-name="'facet_%s_%s' %(facet.id, facet_value.id)" t-att-value="facet_value.id" />
         </t>
         </t>
         </t>
         </t>
         </t>
         <t t-if="filter_ingredients">
         <t t-foreach="filter_ingredients" t-as="ingredient">
         <t t-if="request.session.get('form_values')">
         <t t-if="request.session.get('form_values').get('ingredient_%s' %ingredient.id) == ingredient.id">
         <input type="hidden" t-att-name="'ingredient_%s' %ingredient.id" t-att-value="ingredient.id" />
         </t>
         <t t-if="request.session.get('form_values').get('notingredient_%s' %ingredient.id) == ingredient.id">
         <input type="hidden" t-att-name="'notingredient_%s' %ingredient.id" t-att-value="ingredient.id" />
         </t>
         </t>
         </t>
         </t>
         <input class="hidden" name="post_form" value="ok" />
         <t t-if="user_id.partner_id.property_product_pricelist and user_id.partner_id.property_product_pricelist.for_reseller">
         <t t-if="webshop_type == 'dn_list'">
         <button class="mt32 dn_btn dn_primary" formaction="/webshop/webshop_type/dn_shop" type="submit" title="Switch to grid view">
         <i class="fa fa-th" />
         </button>
         </t>
         <t t-if="webshop_type == 'dn_shop'">
         <button class="mt32 dn_btn dn_primary" formaction="/webshop/webshop_type/dn_list" type="submit" title="Switch to list view">
         <i class="fa fa-th-list" />
         </button>
         </t>
         </t>
         </form>
         </template>
         </data>
    -->
    <data>
        <template id="webshop_dermanord_view_switcher" name="View switcher between grid and list">
            <div id="view_switcher" class="col-md-5 col-sm-5 col-xs-12 btn-group">
                <t t-if="user_id.partner_id.property_product_pricelist and user_id.partner_id.property_product_pricelist.for_reseller">
                    <t t-if="webshop_type == 'dn_list'">
                        <div class="col-md-6 col-sm-6 col-xs-6" style="padding: 0px;">
                            <button class="dn_btn dn_view_type_inactive" style="background-color: #fff;" name="webshop_type" value="dn_shop" type="submit" title="Switch to grid view">
                                <i class="fa fa-th" />
                            </button>
                            <h5 class="text-center dn_uppercase hidden-xs" style="width: 100%;">
                                <small style="font-size: 70%">Imageview</small>
                            </h5>
                        </div>
                        <div class="col-md-6 col-sm-6 col-xs-6" style="padding: 0px;">
                            <button class="dn_btn btn-success dn_viewtype_active" name="webshop_type" value="dn_list" type="submit" title="Switch to list view">
                                <i class="fa fa-th-list" />
                            </button>
                            <h5 class="text-center dn_uppercase hidden-xs" style="width: 100%;">
                                <small style="font-size: 70%">Listview</small>
                            </h5>
                        </div>
                    </t>
                    <t t-if="webshop_type == 'dn_shop'">
                        <div class="col-md-6 col-sm-6 col-xs-6" style="padding: 0px;">
                            <button class="dn_btn btn-success dn_viewtype_active" name="webshop_type" value="dn_shop" type="submit" title="Switch to grid view">
                                <i class="fa fa-th" />
                            </button>
                            <h5 class="text-center dn_uppercase hidden-xs" style="width: 100%;">
                                <small style="font-size: 70%">Imageview</small>
                            </h5>
                        </div>
                        <div class="col-md-6 col-sm-6 col-xs-6" style="padding: 0px;">
                            <button class="dn_btn dn_view_type_inactive" style="background-color: #fff;" name="webshop_type" value="dn_list" type="submit" title="Switch to list view">
                                <i class="fa fa-th-list" />
                            </button>
                            <h5 class="text-center dn_uppercase hidden-xs" style="width: 100%;">
                                <small style="font-size: 70%">Listview</small>
                            </h5>
                        </div>
                    </t>
                </t>
            </div>
        </template>
        <!--
             <template id="webshop_dermanord_mobile_product_filter_content" name="Webshop Dermanord Mobile Product Filter Content">
             <div id="webshop_dermanord_desktop_product_navigator_filter">
             <div class="panel-group mt32 category_filter">
             <div class="panel panel-default">
             <t t-raw="request.env['product.public.category'].get_dn_category_desktop_tree_html(request.env['product.public.category'].search([('parent_id', '=', None), ('website_published', '=', True)]), mobile=mobile)" />
             </div>
             </div>
             <h4 class="dn_uppercase">Filter</h4>
             <div class="panel-group">
             <div class="panel panel-default">
             <t t-foreach="filter_facets" t-as="facet">
             <div class="panel-heading">
             <h4 class="panel-title">
             <input type="checkbox" class="heading_checkbox" />
             <t t-esc="facet.name" />
             <a data-toggle="collapse" t-att-href="('#mobile_facet_%s' %facet.id) if mobile else ('#desktop_facet_%s' %facet.id)" class="pull-right">
             <i class="desktop_angle fa fa-angle-down" />
             </a>
             <t t-set="facet_values" t-value="request.env['product.facet.value'].search([('facet_id', '=', facet.id)])" />
             <t t-if="len(facet_values) &gt; 0 and request.session.get('form_values')">
             <t t-set="facet_values_count" t-value="0" />
             <t t-foreach="facet_values.sorted(key=lambda f: f.name)" t-as="facet_value">
             <t t-if="'facet_%s_%s' %(facet.id, facet_value.id) in request.session.get('form_values').keys()">
             <t t-set="facet_values_count" t-value="facet_values_count + 1" />
             </t>
             </t>
             <t t-if="facet_values_count != 0">
             <span class="filter_match" t-esc="facet_values_count" />
             </t>
             </t>
             </h4>
             </div>
             <div t-att-id="('mobile_facet_%s' %facet.id) if mobile else ('desktop_facet_%s' %facet.id)" class="panel-collapse collapse">
             <div class="panel-body">
             <t t-set="facet_values" t-value="request.env['product.facet.value'].search([('facet_id', '=', facet.id)])" />
             <t t-if="len(facet_values) &gt; 0">
             <t t-foreach="facet_values.sorted(key=lambda f: f.name)" t-as="facet_value">
             <div class="checkbox">
             <label>
             <t t-if="request.session.get('form_values')">
             <input type="checkbox" t-att-name="'facet_%s_%s' %(facet.id, facet_value.id)" t-att-value="facet_value.id" t-att="{'checked': '1'} if (request.session.get('form_values').get('facet_%s_%s' %(facet.id, facet_value.id)) and request.session.get('form_values').get('facet_%s_%s' %(facet.id, facet_value.id)) == str(facet_value.id)) else {}" />
             <span t-esc="facet_value.name" class="category_children_style" />
             </t>
             <t t-if="not request.session.get('form_values')">
             <input type="checkbox" t-att-name="'facet_%s_%s' %(facet.id, facet_value.id)" t-att-value="facet_value.id" />
             <span t-esc="facet_value.name" class="category_children_style" />
             </t>
             </label>
             </div>
             </t>
             </t>
             </div>
             </div>
             </t>
             <div class="panel-heading" t-if="False">
             <h4 class="panel-title">
             <input type="checkbox" class="heading_checkbox" />
             Ingredients
             <a data-toggle="collapse" t-att-href="'#mobile_ingredient' if mobile else '#desktop_ingredient'" class="pull-right">
             <i class="desktop_angle fa fa-angle-down" />
             </a>
             <t t-if="filter_ingredients and request.session.get('form_values')">
             <t t-set="ingredient_count" t-value="0" />
             <t t-foreach="filter_ingredients" t-as="ingredient">
             <t t-if="'ingredient_%s' %ingredient.id in request.session.get('form_values').keys()">
             <t t-set="ingredient_count" t-value="ingredient_count + 1" />
             </t>
             <t t-if="'notingredient_%s' %ingredient.id in request.session.get('form_values').keys()">
             <t t-set="ingredient_count" t-value="ingredient_count + 1" />
             </t>
             </t>
             <t t-if="ingredient_count != 0">
             <span class="filter_match" t-esc="ingredient_count" />
             </t>
             </t>
             </h4>
             </div>
             <div t-att-id="'mobile_ingredient' if mobile else 'desktop_ingredient'" class="panel-collapse collapse" t-if="False">
             <div class="panel-body">
             <t t-if="filter_ingredients">
             <t t-foreach="filter_ingredients" t-as="ingredient">
             <h5 t-field="ingredient.name" />
             <div class="checkbox">
             <label class="col-md-6 col-sm-6 col-xs-6" style="float: left;">
             <t t-if="request.session.get('form_values')">
             <input type="checkbox" t-att-name="'ingredient_%s' %ingredient.id" t-att-value="ingredient.id" t-att="{'checked': '1'} if request.session.get('form_values').get('ingredient_%s' %ingredient.id) == ingredient.id else {}" class="like" />
             <i class="fa fa-smile-o like_icon" />
             </t>
             <t t-if="not request.session.get('form_values')">
             <input type="checkbox" t-att-name="'ingredient_%s' %ingredient.id" t-att-value="ingredient.id" class="like" />
             <i class="fa fa-smile-o like_icon" />
             </t>
             </label>
             <label class="col-md-6 col-sm-6 col-xs-6" style="float: right;">
             <t t-if="request.session.get('form_values')">
             <input type="checkbox" t-att-name="'notingredient_%s' %ingredient.id" t-att-value="ingredient.id" t-att="{'checked': '1'} if request.session.get('form_values').get('notingredient_%s' %ingredient.id) == ingredient.id else {}" class="unlike" />
             <i class="fa fa-frown-o unlike_icon" />
             </t>
             <t t-if="not request.session.get('form_values')">
             <input type="checkbox" t-att-name="'notingredient_%s' %ingredient.id" t-att-value="ingredient.id" class="unlike" />
             <i class="fa fa-frown-o unlike_icon" />
             </t>
             </label>
             </div>
             </t>
             </t>
             </div>
             </div>
             </div>
             </div>
             </div>
             </template>
             <template id="webshop_dermanord_mobile_product_filter_navigator" name="Webshop Dermanord Mobile Product Filter Navigator">
             <ul class="nav nav-stacked">
             <li class="active">
             <a data-toggle="tab" href="#current">
             <h5>
             New products &amp; Offers
             <t t-set="current_count" t-value="0" />
             <t t-if="'current_news' in request.session.get('form_values').keys() or 'current_offer' in request.session.get('form_values').keys()">
             <t t-if="request.session.get('form_values').get('current_news') == 'current_news'">
             <t t-set="current_count" t-value="current_count + 1" />
             </t>
             <t t-if="request.session.get('form_values').get('current_offer') == 'current_offer'">
             <t t-set="current_count" t-value="current_count + 1" />
             </t>
             </t>
             <t t-if="current_count != 0">
             <span class="filter_match" t-esc="current_count" />
             </t>
             <i class="fa fa-angle-right" />
             </h5>
             </a>
             </li>
             <t t-foreach="filter_categories" t-as="category">
             <li>
             <h5>
             <a t-att-href="'/webshop/category/%s' %category.id">
             <t t-esc="category.name" />
             </a>
             <t t-set="category_count" t-value="0" />
             <t t-if="'category_%s' %category.id in request.session.get('form_values').keys()">
             <t t-set="category_count" t-value="category_count + 1" />
             </t>
             <t t-if="category_count != 0">
             <span class="filter_match" t-esc="category_count" />
             </t>
             <a data-toggle="tab" t-att-href="'#mobil_category_%s' %category.id">
             <i class="fa fa-angle-right" />
             </a>
             </h5>
             </li>
             </t>
             <t t-foreach="filter_facets" t-as="facet">
             <li>
             <a data-toggle="tab" t-att-href="'#facet_%s' %facet.id">
             <h5>
             <span t-esc="facet.name" />
             <t t-set="facet_values" t-value="request.env['product.facet.value'].search([('facet_id', '=', facet.id)])" />
             <t t-if="len(facet_values) &gt; 0 and request.session.get('form_values')">
             <t t-set="facet_values_count" t-value="0" />
             <t t-foreach="facet_values.sorted(key=lambda f: f.name)" t-as="facet_value">
             <t t-if="'facet_%s_%s' %(facet.id, facet_value.id) in request.session.get('form_values').keys()">
             <t t-set="facet_values_count" t-value="facet_values_count + 1" />
             </t>
             </t>
             <t t-if="facet_values_count != 0">
             <span class="filter_match" t-esc="facet_values_count" />
             </t>
             </t>
             <i class="fa fa-angle-right" />
             </h5>
             </a>
             </li>
             </t>
             <li t-if="filter_ingredients and request.session.get('form_values')">
             <a data-toggle="tab" href="#ingredient">
             <h5>
             Ingredients
             <t t-set="ingredient_count" t-value="0" />
             <t t-foreach="filter_ingredients" t-as="ingredient">
             <t t-if="'ingredient_%s' %ingredient.id in request.session.get('form_values').keys()">
             <t t-set="ingredient_count" t-value="ingredient_count + 1" />
             </t>
             <t t-if="'notingredient_%s' %ingredient.id in request.session.get('form_values').keys()">
             <t t-set="ingredient_count" t-value="ingredient_count + 1" />
             </t>
             </t>
             <t t-if="ingredient_count != 0">
             <span class="filter_match" t-esc="ingredient_count" />
             </t>
             <i class="fa fa-angle-right" />
             </h5>
             </a>
             </li>
             </ul>
             </template>
        -->
        <template id="webshop_dermanord_mobile_product_filter_form" name="Webshop Dermanord Mobile Product Filter Form">
            <!--
                 <form action="/webshop" method="post">
                 <div class="container" style="padding: 0px;">
                 <t t-set="first_facet" t-value="0" />
                 <div class="col-md-6 col-sm-6 col-xs-6" style="padding: 0px;">
                 <t t-call="webshop_dermanord.webshop_dermanord_mobile_product_filter_navigator" />
                 </div>
                 <div class="col-md-6 col-sm-6 col-xs-6" style="padding: 0px;">
                 <t t-call="webshop_dermanord.webshop_dermanord_mobile_product_filter_content" />
                 </div>
                 </div>
                 <div id="filter_btn_group" class="btn-group">
                 <button class="mt32 dn_btn dn_primary dn_ok" name="post_form" value="ok" type="submit" style="padding: 12px 20px;">Search</button>
                 <button class="mt32 dn_btn dn_default" name="post_form" value="ok" type="submit" onclick="webshop_restore_filter()" style="padding: 12px 20px;">
                 <i class="fa fa-trash-o" />
                 Clear All
                 </button>
                 <t t-call="webshop_dermanord.dn_website_group_info"/>
                 </div>
                 </form>
            -->
            <form action="/webshop" method="post" class="container">
<!--
                <div class="btn-group">
                    <button class="mt32 dn_btn dn_success dn_ok" name="post_form" value="ok" type="submit" style="padding: 12px 20px;">Search</button>
                    <button class="mt32 dn_btn dn_default" name="post_form" value="ok" type="submit" onclick="webshop_restore_filter()" style="padding: 12px 20px;">
                        <i class="fa fa-trash-o" />
                        Clear All
                    </button>
                    <t t-call="webshop_dermanord.dn_website_group_info" />
                </div>
-->
                <div class="btn-group mt32">
                    <t t-call="webshop_dermanord.webshop_dermanord_view_switcher" />
                </div>
                <div style="padding: 0px;">
                    <t t-set="filter_facets" t-value="request.env['product.facet'].search([])" />
                    <t t-set="filter_categories" t-value="request.env['product.public.category'].search([])" />
                    <t t-set="first_facet" t-value="0" />
                    <t t-call="webshop_dermanord.webshop_dermanord_desktop_product_filter_content">
                        <t t-set="mobile" t-value="True" />
                    </t>
                </div>
                <input type="hidden" name="order" t-att-value="request.session.get('form_values', {}).get('order') or 'name desc'" />
            </form>
        </template>
        <template id="webshop_dermanord_mobile_product_sort_form" name="Webshop Dermanord Mobile Product Sort Form">
            <form action="/webshop" method="post">
                <div class="container" style="padding: 0px;">
                    <ul style="list-style-type: none;">
                        <li>
                            <div class="radio">
                                <label>
                                    <input type="radio" name="order" value="name asc, default_code asc" t-att="{'checked': '1'} if (not request.session.get('current_order') or request.session.get('current_order') == 'name asc, default_code asc') else {}" />
                                    Name Ascending
                                </label>
                            </div>
                        </li>
                        <li>
                            <div class="radio">
                                <label>
                                    <input type="radio" name="order" value="name desc, default_code desc" t-att="{'checked': '1'} if request.session.get('current_order') == 'name desc, default_code desc' else {}" />
                                    Name Descending
                                </label>
                            </div>
                        </li>
                        <li>
                            <div class="radio">
                                <label>
                                    <input type="radio" name="order" t-att-value="'dn_price_chart_sort_%s asc' % pricelist_chart_type_id" t-att="{'checked': '1'} if request.session.get('current_order') == 'dn_price_chart_sort_%s asc' % pricelist_chart_type_id else {}" />
                                    Price Ascending
                                </label>
                            </div>
                        </li>
                        <li>
                            <div class="radio">
                                <label>
                                    <input type="radio" name="order" t-att-value="'dn_price_chart_sort_%s desc' % pricelist_chart_type_id" t-att="{'checked': '1'} if request.session.get('current_order') == 'dn_price_chart_sort_%s desc' % pricelist_chart_type_id else {}" />
                                    Price Descending
                                </label>
                            </div>
                        </li>
                        <li>
                            <div class="radio">
                                <label>
                                    <input type="radio" name="order" value="sold_qty desc" t-att="{'checked': '1'} if request.session.get('current_order') == 'sold_qty desc' else {}" />
                                    Most Sold
                                </label>
                            </div>
                        </li>
                    </ul>
                </div>
                <t t-if="request.session.get('form_values')">
                    <t t-if="request.session.get('form_values').get('current_news') == 'current_news'">
                        <input type="hidden" name="current_news" value="current_news" />
                    </t>
                    <t t-if="request.session.get('form_values').get('current_offer') == 'current_offer'">
                        <input type="hidden" name="current_offer" value="current_offer" />
                    </t>
                </t>
                <t t-if="filter_categories">
                    <t t-foreach="filter_categories" t-as="category">
                        <t t-if="request.session.get('form_values')">
                            <t t-if="request.session.get('form_values').get('category_%s' %category.id) == category.id">
                                <input type="hidden" t-att-name="'category_%s' %category.id" t-att-value="category.id" />
                            </t>
                        </t>
                    </t>
                </t>
                <t t-foreach="filter_facets" t-as="facet">
                    <t t-set="facet_values" t-value="request.env['product.facet.value'].search([('facet_id', '=', facet.id)])" />
                    <t t-if="len(facet_values) &gt; 0">
                        <t t-foreach="facet_values.sorted(key=lambda f: f.name)" t-as="facet_value">
                            <t t-if="request.session.get('form_values')">
                                <t t-if="request.session.get('form_values').get('facet_%s_%s' %(facet.id, facet_value.id)) == str(facet_value.id)">
                                    <input type="hidden" t-att-name="'facet_%s_%s' %(facet.id, facet_value.id)" t-att-value="facet_value.id" />
                                </t>
                            </t>
                        </t>
                    </t>
                </t>
                <t t-if="filter_ingredients">
                    <t t-foreach="filter_ingredients" t-as="ingredient">
                        <t t-if="request.session.get('form_values')">
                            <t t-if="request.session.get('form_values').get('ingredient_%s' %ingredient.id) == ingredient.id">
                                <input type="hidden" t-att-name="'ingredient_%s' %ingredient.id" t-att-value="ingredient.id" />
                            </t>
                            <t t-if="request.session.get('form_values').get('notingredient_%s' %ingredient.id) == ingredient.id">
                                <input type="hidden" t-att-name="'notingredient_%s' %ingredient.id" t-att-value="ingredient.id" />
                            </t>
                        </t>
                    </t>
                </t>
                <div class="btn-group">
                    <button class="mt32 dn_btn dn_success dn_ok" name="post_form" value="ok" type="submit">OK</button>
                </div>
            </form>
        </template>
        <template id="webshop_dermanord_mobile_main_filter_sort_layout" inherit_id="website.layout" name="Webshop Dermanord Mobile Main Filter Sort Layout">
            <xpath expr="//div[@id='wrapwrap']/main" position="inside">
                <t t-if="shop_footer and filter_version == 'webshop'">
                    <t t-set="filter_facets" t-value="request.env['product.facet'].get_filtered_facets(request.session.get('form_values'))" />
                    <t t-set="filter_categories" t-value="request.env['product.public.category'].search([('parent_id', '=', None)])" />
                    
                    <div id="webshop_dermanord_mobile_filter_modal" class="modal fade hidden-lg hidden-md hidden-sm" role="dialog">
                        
                        <div class="modal-dialog" style="margin: 0px; width: 100%;">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title">
                                        Product Filter
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&amp;times;</span>
                                        </button>
                                    </h5>
                                </div>
                                <div class="modal-body" style="padding: 0px;">
                                    <t t-call="webshop_dermanord.webshop_dermanord_mobile_product_filter_form" />
                                </div>
                                <div class="modal-footer hidden">
                                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="webshop_dermanord_mobile_sort_modal" class="modal fade hidden-lg hidden-md hidden-sm" role="dialog">
                        <div class="modal-dialog" style="margin: 0px; width: 100%;">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title">
                                        Product Sort
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&amp;times;</span>
                                        </button>
                                    </h5>
                                </div>
                                <div class="modal-body">
                                    <t t-call="webshop_dermanord.webshop_dermanord_mobile_product_sort_form" />
                                </div>
                                <div class="modal-footer hidden">
                                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="webshop_dermanord_mobile_bottom_div" class="container hidden-lg hidden-md hidden-sm">
                        <a href="#" id="webshop-dermanord-btn-modal" data-toggle="modal" data-target="#webshop_dermanord_mobile_filter_modal" class="pull-left" style="color: #fff; font-size: 1.3em; padding: 5px;">
                            <i class="fa fa-filter" />
                            Filter
                            <!--
                                 <span class="filter_match" t-if="request.session.get('chosen_filter_qty') &gt; 0">
                                 <t t-esc="request.session.get('chosen_filter_qty')" />
                                 </span>
                            -->
                            <span id="mobile_filter_match" class="filter_match hidden" />
                        </a>
                        <a href="#" id="webshop-dermanord-sort-btn-modal" data-toggle="modal" data-target="#webshop_dermanord_mobile_sort_modal" class="pull-right" style="color: #fff; font-size: 1.3em; padding: 5px;">
                            <i class="fa fa-sort" />
                            Sort
                            <span class="sort_match" t-if="request.session.get('sort_name') and request.session.get('sort_order')">
                                <i class="fa fa-font" t-if="request.session.get('sort_name') == 'name'" />
                                <i class="fa fa-dollar" t-if="request.session.get('sort_name') == 'dn_price_chart_sort_%s' % pricelist_chart_type_id" />
                                <i class="fa fa-barcode" t-if="request.session.get('sort_name') == 'default_code'" />
                                <i class="fa fa-trophy" t-if="request.session.get('sort_name') == 'sold_qty'" />
                                <i class="fa fa-sort-asc" t-if="request.session.get('sort_order') == 'asc'" />
                                <i class="fa fa-sort-desc" t-if="request.session.get('sort_order') == 'desc'" />
                            </span>
                        </a>
                    </div>
                </t>
            </xpath>
        </template>
        <template id="webshop_dermanord_desktop_product_filter_content" name="Webshop Dermanord Desktop Filter Content">
            <t t-set="ressal" t-value="[request.env.ref('webshop_dermanord.facet_specialforpackningar').id]" />
            <div t-att-id="'mobile_product_navigator_filter' if mobile else 'desktop_product_navigator_filter'">
                <t t-if="mobile == False">
                    <div class="panel-group mt32 category_filter">
                        <div class="panel panel-default">
                            <t t-raw="request.env['product.public.category'].get_dn_category_desktop_tree_html(request.env['product.public.category'].search([('parent_id', '=', None), ('website_published', '=', True), ('group_ids', 'in', request.env.user.commercial_partner_id.access_group_ids.mapped('id'))]), mobile=mobile)" />
                        </div>
                    </div>
                    <div class="btn-group filter">
                        <button class="mt32 dn_btn dn_success dn_ok" name="post_form" value="ok" type="submit" style="padding: 12px 20px;">Search</button>
                        <button class="mt32 dn_btn dn_default" name="post_form" value="ok" type="submit" onclick="webshop_restore_filter()" style="padding: 12px 20px;">
                            <i class="fa fa-trash-o" />
                            Clear All
                        </button>
                        <t t-call="webshop_dermanord.dn_website_group_info" />
                    </div>
                    <div class="panel-group">
                        <div class="panel panel-default">
                            <div class="panel-heading" style="border: 1px solid #ddd; border-bottom: none; background-color: #fff;">
                                <h4 class="panel-title container">
                                    <input type="checkbox" class="heading_checkbox col-md-1 col-sm-1" name="current_offer" value="current_offer" t-att="{'checked': 'checked'} if request.session.get('form_values').get('current_offer') == 'current_offer' else {}" />
                                    <a class="onrs_style col-md-11 col-sm-11" style="padding-left: 3px; cursor: pointer;" href="javascript:void(0);" onclick="onclick_submit($(this));">Offers</a>
                                </h4>
                            </div>
                            <div class="panel-heading" style="border: 1px solid #ddd; border-bottom: none; background-color: #fff;">
                                <h4 class="panel-title container">
                                    <input type="checkbox" class="heading_checkbox col-md-1 col-sm-1" name="current_news" value="current_news" t-att="{'checked': 'checked'} if request.session.get('form_values').get('current_news') == 'current_news' else {}" />
                                    <a class="onrs_style col-md-11 col-sm-11" style="padding-left: 3px; cursor: pointer;" href="javascript:void(0);" onclick="onclick_submit($(this));">News</a>
                                </h4>
                            </div>

                            <t t-raw="request.env['product.public.category'].dn_facet_desktop_tree_html(mobile=mobile)" />
                        </div>
                    </div>
                </t>
                <!--    Get categories in order to show filters.    -->
                <t t-if="mobile == True">
                    <div class="hidden">
                        <t t-raw="request.env['product.public.category'].get_dn_category_desktop_tree_html(request.env['product.public.category'].search([('parent_id', '=', None), ('website_published', '=', True), ('group_ids', 'in', request.env.user.commercial_partner_id.access_group_ids.mapped('id'))]), mobile=mobile)" />
                    </div>
                </t>
                <h4 class="dn_uppercase">Filter</h4>
                <div class="panel-group">
                    <div class="panel panel-default">
                        <t t-foreach="filter_facets.with_context(ressal=ressal).filtered(lambda f: f.id not in f._context.get('ressal'))" t-as="facet">
                            <div class="panel-heading facet_panel_heading hidden" t-att-data-facet="facet.id" t-att-data-mobile="'mobile' if mobile else 'desktop'" t-att-data-categories="facet.category_ids.mapped('id')">
                                <h4 class="panel-title">
                                    <input type="checkbox" class="heading_checkbox" />
                                    <t t-esc="facet.name" />
                                    <a data-toggle="collapse" t-att-href="('#mobile_facet_%s' %facet.id) if mobile else ('#desktop_facet_%s' %facet.id)" class="pull-right">
                                        <i class="desktop_angle fa fa-angle-down" />
                                    </a>
                                    <t t-set="facet_values" t-value="request.env['product.facet.value'].search([('facet_id', '=', facet.id)])" />
                                    <t t-if="len(facet_values) &gt; 0 and request.session.get('form_values')">
                                        <t t-set="facet_values_count" t-value="0" />
                                        <t t-foreach="facet_values.sorted(key=lambda f: f.name)" t-as="facet_value">
                                            <t t-if="'facet_%s_%s' %(facet.id, facet_value.id) in request.session.get('form_values').keys()">
                                                <t t-set="facet_values_count" t-value="facet_values_count + 1" />
                                            </t>
                                        </t>
                                        <t t-if="facet_values_count != 0">
                                            <span class="filter_match" t-esc="facet_values_count" />
                                        </t>
                                    </t>
                                </h4>
                            </div>
                            <div t-att-id="('mobile_facet_%s' %facet.id) if mobile else ('desktop_facet_%s' %facet.id)" class="panel-collapse collapse">
                                <div class="panel-body">
                                    <t t-set="facet_values" t-value="request.env['product.facet.value'].search([('facet_id', '=', facet.id)])" />
                                    <t t-if="len(facet_values) &gt; 0">
                                        <t t-foreach="facet_values.sorted(key=lambda f: f.name)" t-as="facet_value">
                                            <div class="checkbox">
                                                <label>
                                                    <t t-if="request.session.get('form_values')">
                                                        <input type="checkbox" t-att-name="'facet_%s_%s' %(facet.id, facet_value.id)" t-att-value="facet_value.id" t-att="{'checked': '1'} if (request.session.get('form_values').get('facet_%s_%s' %(facet.id, facet_value.id)) and request.session.get('form_values').get('facet_%s_%s' %(facet.id, facet_value.id)) == str(facet_value.id)) else {}" />
                                                        <span t-esc="facet_value.name" class="category_children_style" />
                                                    </t>
                                                    <t t-if="not request.session.get('form_values')">
                                                        <input type="checkbox" t-att-name="'facet_%s_%s' %(facet.id, facet_value.id)" t-att-value="facet_value.id" />
                                                        <span t-esc="facet_value.name" class="category_children_style" />
                                                    </t>
                                                </label>
                                            </div>
                                        </t>
                                    </t>
                                </div>
                            </div>
                        </t>
                        <div class="panel-heading" t-if="False">
                            <h4 class="panel-title">
                                <input type="checkbox" class="heading_checkbox" />
                                Ingredients
                                <a data-toggle="collapse" t-att-href="'#mobile_ingredient' if mobile else '#desktop_ingredient'" class="pull-right">
                                    <i class="desktop_angle fa fa-angle-down" />
                                </a>
                                <t t-if="filter_ingredients and request.session.get('form_values')">
                                    <t t-set="ingredient_count" t-value="0" />
                                    <t t-foreach="filter_ingredients" t-as="ingredient">
                                        <t t-if="'ingredient_%s' %ingredient.id in request.session.get('form_values').keys()">
                                            <t t-set="ingredient_count" t-value="ingredient_count + 1" />
                                        </t>
                                        <t t-if="'notingredient_%s' %ingredient.id in request.session.get('form_values').keys()">
                                            <t t-set="ingredient_count" t-value="ingredient_count + 1" />
                                        </t>
                                    </t>
                                    <t t-if="ingredient_count != 0">
                                        <span class="filter_match" t-esc="ingredient_count" />
                                    </t>
                                </t>
                            </h4>
                        </div>
                        <div t-att-id="'mobile_ingredient' if mobile else 'desktop_ingredient'" class="panel-collapse collapse" t-if="False">
                            <div class="panel-body">
                                <t t-if="filter_ingredients">
                                    <t t-foreach="filter_ingredients" t-as="ingredient">
                                        <h5 t-field="ingredient.name" />
                                        <div class="checkbox">
                                            <label class="col-md-6 col-sm-6 col-xs-6" style="float: left;">
                                                <t t-if="request.session.get('form_values')">
                                                    <input type="checkbox" t-att-name="'ingredient_%s' %ingredient.id" t-att-value="ingredient.id" t-att="{'checked': '1'} if request.session.get('form_values').get('ingredient_%s' %ingredient.id) == ingredient.id else {}" class="like" />
                                                    <i class="fa fa-smile-o like_icon" />
                                                </t>
                                                <t t-if="not request.session.get('form_values')">
                                                    <input type="checkbox" t-att-name="'ingredient_%s' %ingredient.id" t-att-value="ingredient.id" class="like" />
                                                    <i class="fa fa-smile-o like_icon" />
                                                </t>
                                            </label>
                                            <label class="col-md-6 col-sm-6 col-xs-6" style="float: right;">
                                                <t t-if="request.session.get('form_values')">
                                                    <input type="checkbox" t-att-name="'notingredient_%s' %ingredient.id" t-att-value="ingredient.id" t-att="{'checked': '1'} if request.session.get('form_values').get('notingredient_%s' %ingredient.id) == ingredient.id else {}" class="unlike" />
                                                    <i class="fa fa-frown-o unlike_icon" />
                                                </t>
                                                <t t-if="not request.session.get('form_values')">
                                                    <input type="checkbox" t-att-name="'notingredient_%s' %ingredient.id" t-att-value="ingredient.id" class="unlike" />
                                                    <i class="fa fa-frown-o unlike_icon" />
                                                </t>
                                            </label>
                                        </div>
                                    </t>
                                </t>
                            </div>
                        </div>
                    </div>
                </div>
                <t t-if="mobile == True">
                    <div class="panel-group">
                        <div class="panel panel-default">
                            <div class="panel-heading" style="border: 1px solid #ddd; border-bottom: none; background-color: #fff;">
                                <h4 class="panel-title container">
                                    <input type="checkbox" class="heading_checkbox col-md-1 col-sm-1" name="current_offer" value="current_offer" t-att="{'checked': 'checked'} if request.session.get('form_values').get('current_offer') == 'current_offer' else {}" />
                                    <a class="onrs_style col-md-11 col-sm-11" style="padding-left: 3px; cursor: pointer;" href="javascript:void(0);" onclick="onclick_submit($(this));">Offers</a>
                                </h4>
                            </div>
                            <div class="panel-heading" style="border: 1px solid #ddd; border-bottom: none; background-color: #fff;">
                                <h4 class="panel-title container">
                                    <input type="checkbox" class="heading_checkbox col-md-1 col-sm-1" name="current_news" value="current_news" t-att="{'checked': 'checked'} if request.session.get('form_values').get('current_news') == 'current_news' else {}" />
                                    <a class="onrs_style col-md-11 col-sm-11" style="padding-left: 3px; cursor: pointer;" href="javascript:void(0);" onclick="onclick_submit($(this));">News</a>
                                </h4>
                            </div>

                            <t t-raw="request.env['product.public.category'].dn_facet_desktop_tree_html(mobile=mobile)" />
                        </div>
                    </div>
                    
                    <div class="btn-group filter">
                        <button class="mt32 dn_btn dn_success dn_ok" name="post_form" value="ok" type="submit" style="padding: 12px 20px;">Search</button>
                        <button class="mt32 dn_btn dn_default" name="post_form" value="ok" type="submit" onclick="webshop_restore_filter()" style="padding: 12px 20px;">
                            <i class="fa fa-trash-o" />
                            Clear All
                        </button>
                        <t t-call="webshop_dermanord.dn_website_group_info" />
                    </div>
                </t>
            </div>
        </template>
        <template id="webshop_dermanord_desktop_product_filter_form" name="Webshop Dermanord Desktop Product Filter Form">
            <form action="/webshop" method="post">
            <div id="filter_view">
                <div class="col-md-9 col-sm-7 col-xs-7" style="padding: 0px;">
                    <select id="webshop_dermanord_desktop_sort_selector" name="order" class="form-control selectpicker dropdown dn_selection_dropdown" onchange="this.form.submit();">
                        <option value="name asc, default_code asc" t-att="{'selected': '1'} if request.session.get('current_order') == 'name asc, default_code asc' else {}">Name Ascending</option>
                        <option value="name desc, default_code desc" t-att="{'selected': '1'} if request.session.get('current_order') == 'name desc, default_code desc' else {}">Name Descending</option>
                        <option t-att-value="'dn_price_chart_sort_%s asc' % pricelist_chart_type_id" t-att="{'selected': '1'} if request.session.get('current_order') == 'dn_price_chart_sort_%s asc' % pricelist_chart_type_id else {}">Price Ascending</option>
                        <option t-att-value="'dn_price_chart_sort_%s desc' % pricelist_chart_type_id" t-att="{'selected': '1'} if request.session.get('current_order') == 'dn_price_chart_sort_%s desc' % pricelist_chart_type_id else {}">Price Descending</option>
                        <option value="sold_qty desc" t-att="{'selected': '1'} if request.session.get('current_order') == 'sold_qty desc' else {}">Most Sold</option>
                    </select>
                    <i class="desktop_angle fa fa-angle-down" />
                </div>
                <input class="hidden" name="post_form" value="ok" />
                <t t-call="webshop_dermanord.webshop_dermanord_view_switcher" />
                </div>
                <div class="container" style="padding: 0px;">
                    <t t-set="first_facet" t-value="0" />
                    <t t-call="webshop_dermanord.webshop_dermanord_desktop_product_filter_content">
                        <t t-set="mobile" t-value="False" />
                    </t>
                </div>
                <input type="hidden" name="order" t-att-value="request.session.get('form_values', {}).get('order') or 'name desc'" />
            
            </form>
        </template>
        <!--
             <template id="webshop_dermanord_desktop_product_sort_form" name="Webshop Dermanord Desktop Product Sort Form">
             <form action="/webshop" method="post">
             <div class="col-md-7 col-sm-7 col-xs-7" style="padding: 0px;">
             <select id="webshop_dermanord_desktop_sort_selector" name="order" class="form-control selectpicker dropdown dn_selection_dropdown" onchange="this.form.submit();">
             <t t-if="request.session.get('form_values')">
             <option value="name asc, default_code asc" t-att="{'selected': '1'} if request.session.get('form_values').get('order') == 'name asc, default_code asc' else {}">Name Ascending</option>
             <option value="name desc, default_code desc" t-att="{'selected': '1'} if request.session.get('form_values').get('order') == 'name desc, default_code desc' else {}">Name Descending</option>
             <option value="list_price asc" t-att="{'selected': '1'} if request.session.get('form_values').get('order') == 'list_price asc' else {}">Price Ascending</option>
             <option value="list_price desc" t-att="{'selected': '1'} if request.session.get('form_values').get('order') == 'list_price desc' else {}">Price Descending</option>
             <option value="sold_qty desc" t-att="{'selected': '1'} if request.session.get('form_values').get('order') == 'sold_qty desc' else {}">Most Sold</option>
             </t>
             <t t-if="not request.session.get('form_values')">
             <option value="name asc, default_code asc" select="1">Name Ascending</option>
             <option value="name desc, default_code desc">Name Descending</option>
             <option value="list_price asc">Price Ascending</option>
             <option value="list_price desc">Price Descending</option>
             <option value="sold_qty desc">Most Sold</option>
             </t>
             </select>
             <i class="desktop_angle fa fa-angle-down" />
             </div>
             <t t-if="request.session.get('form_values')">
             <t t-if="request.session.get('form_values').get('current_news') == 'current_news'">
             <input type="hidden" name="current_news" value="current_news" />
             </t>
             <t t-if="request.session.get('form_values').get('current_offer') == 'current_offer'">
             <input type="hidden" name="current_offer" value="current_offer" />
             </t>
             </t>
             <t t-if="filter_categories">
             <t t-foreach="filter_categories" t-as="category">
             <t t-if="request.session.get('form_values')">
             <t t-if="request.session.get('form_values').get('category_%s' %category.id) == category.id">
             <input type="hidden" t-att-name="'category_%s' %category.id" t-att-value="category.id" />
             </t>
             </t>
             </t>
             </t>
             <t t-foreach="filter_facets" t-as="facet">
             <t t-set="facet_values" t-value="request.env['product.facet.value'].search([('facet_id', '=', facet.id)])" />
             <t t-if="len(facet_values) &gt; 0">
             <t t-foreach="facet_values.sorted(key=lambda f: f.name)" t-as="facet_value">
             <t t-if="request.session.get('form_values')">
             <t t-if="request.session.get('form_values').get('facet_%s_%s' %(facet.id, facet_value.id)) == str(facet_value.id)">
             <input type="hidden" t-att-name="'facet_%s_%s' %(facet.id, facet_value.id)" t-att-value="facet_value.id" />
             </t>
             </t>
             </t>
             </t>
             </t>
             <t t-if="filter_ingredients">
             <t t-foreach="filter_ingredients" t-as="ingredient">
             <t t-if="request.session.get('form_values')">
             <t t-if="request.session.get('form_values').get('ingredient_%s' %ingredient.id) == ingredient.id">
             <input type="hidden" t-att-name="'ingredient_%s' %ingredient.id" t-att-value="ingredient.id" />
             </t>
             <t t-if="request.session.get('form_values').get('notingredient_%s' %ingredient.id) == ingredient.id">
             <input type="hidden" t-att-name="'notingredient_%s' %ingredient.id" t-att-value="ingredient.id" />
             </t>
             </t>
             </t>
             </t>
             <input class="hidden" name="post_form" value="ok" />
             <t t-call="webshop_dermanord.webshop_dermanord_view_switcher" />
             </form>
             </template>
        -->
        <template id="webshop_dermanord_desktop_product_filter_navigator" name="Webshop Dermanord Desktop Product Filter Navigator">
            <div class="mt64 hidden-xs">
                <t t-set="filter_facets" t-value="request.env['product.facet'].search([])" />
                <t t-set="filter_categories" t-value="request.env['product.public.category'].search([])" />
                <!--
                     <t t-call="webshop_dermanord.webshop_dermanord_desktop_product_sort_form" />
                -->
                <t t-call="webshop_dermanord.webshop_dermanord_desktop_product_filter_form" />
            </div>
        </template>
    </data>
</openerp>
